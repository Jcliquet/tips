Linux - banalize a system
==========================

Use case : before making a VM template

[source,bash]
-----------------------------------------------------------------------------
test $EUID -eq 0 || { echo "Run this script as root"; exit 1; }
rm -rf /etc/ssh/*key /etc/ssh/*.pub
sed -i 's/HOSTNAME=.*$/HOSTNAME=localhost/g' /etc/sysconfig/network
sed -i '/HWADDR=/d' /etc/sysconfig/network-scripts/ifcfg-eth*
sed -i '/UUID=/d' /etc/sysconfig/network-scripts/ifcfg-eth*
sed -i 's/^IPADDR=/#IPADDR=/g' /etc/sysconfig/network-scripts/ifcfg-eth*
sed -i '/# PCI device/d' /etc/udev/rules.d/70-persistent-net.rules
sed -i '/ATTR{address}/d' /etc/udev/rules.d/70-persistent-net.rules
yum clean all
rm -f /root/.bash_history
history -c
-----------------------------------------------------------------------------

Additional tag : sysprep
